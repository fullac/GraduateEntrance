# C
## 说在前面
刷题中C和C++的题杂糅在一起，下文的知识点也是杂糅的，请注意！
## 记忆点
1. `struct`存在字节对齐。
2. C允许赋值使用连等，声明不允许连等。即`int a = b = 1;`是错的，但是`a = b = 1;`是对的。
3. string的格式化输出：`%m.ns`表示长度为n~m的字符串。
4. fseek函数：`int fseek( FILE *stream, long offset, int origin );`，三个参数分别为，文件指针，位移量，起始点。功能为移动到文件的某一个位置。
5. `extern "C"`修饰的函数会被编译器强制按照C语言的方式进行编译。
6. 顺序求值运算符`,`，逗号表达式的值等于最后一个表达式的结果，且赋值运算符优先级大于顺序求值运算符。
7. 关于ASCII与ANSI：ASCII是ANSI的子集。
   - 标准的ASCII占7bit，扩展的ASCII占8bit；
   - ASCII含有关于控制的字符，不可打印。
8. 字符常量：普通字符`'A'`与转义字符`'\101'`或`'\0101'`或`'\x41'`，转义字符只能用八进制或十六进制。
9. C语言不支持运算符重载。C++支持重载，但三目运算符`?:`、作用域运算符`::`、成员指针运算符`.*`与`->*`、`.`、`sizeof`不可重载。
10. 结构体中不允许直接定义本结构体类型的变量，但可以定义指向本结构体类型的指针。
11. `strlen()`的参数必须是`const char *`，其计算长度的方法是，计算开始至第一个终止符`'\0'`的距离（不含`'\0'`），若没有则结果未知。
    > `sizeof()`是运算符，返回所占内存字节数，因此用`sizeof()`计算C风格字符串时，结果会多计算一个终止符。
12. C的函数省略类型默认为int，且与返回类型不一致时，均以函数类型为准。
13. **`static`关键字的作用**：
    - 静态局部变量：仅初始化一次，即使无值也会默认填0；另外改变变量的存储位置（栈区->静态区），延长生命周期；
    - 静态全局变量：仅当前文件可访问，外部文件即便使用`extern`也无法访问；
    - 静态函数：仅当前文件可访问；
    - 静态成员变量与成员函数：可以通过对象或者类名访问静态成员函数；
    - “出现在类体外的函数定义不能指定关键字`static`”：在外部定义成员函数时不能使用`static`，因为成员函数作用域为类域，在外使用`static`会改变为文件域，从而报错。
14. 函数原型： `returntype funcname(paratype paraname);`，其中返回类型和参数名可省略。
15. 指针声明后未初始化，其值是随机的，也是野指针。除此以外，指针越界访问与指针指向的空间被释放，也会导致野指针。
16. 三目运算符结合性从右到左。

## 原题

1. 输出结果为`-1`。
  字符型占一字节在赋值0xFFFF时会截断，此时x的值为FF即11111111。
  内存中的数据是带符号补码表示，其原码为10000001，即-1。
  在printf一行，x--先输出再减一。
  ```c
  int main() { 
    char x = 0xFFFF;
    printf("%d\n",x--);
  }
  ```
2. 输出结果为`2， 5`。
  `&a`为数组a的首地址，且数组大小为5int，因此+1时的偏移量为5int，即`&a + 1`表示整个数组之后的下一地址，亦即数组结尾的下一地址。
  而`a + 1`的偏移量为1int，a + 1表示下一个数组元素的地址。
  此题中进行了强制转换`(int*)(&a + 1)`，因此`ptr - 1`的偏移量为1int，因此`ptr - 1`为数组的最后一个元素地址。
  `*(a + 1)`显然为数组的第二个元素。
  ```c
  int main() {
      int a[5]  = {1, 2, 3, 4, 5};
      int *ptr = (int*)(&a + 1);
      printf("%d, %d", *(a + 1), *(ptr - 1));
      return 0;
  }
  ```
3. 关于运算符重载的一道题，由于C不涉及运算符重载，这里只引用网址：`https://www.nowcoder.com/questionTerminal/aa0807a3e1e641e0b71ce62c08c5e205?`。
4. 输入`ABC`，输出结果为`ABC6789`。
     - `gets()`会将输入流中的回车`'\n'`转换为`'\0'`存入`ss`中，此后`ss = 'ABC\0,3,4,5\0'`；
     - `strcat()`会从第一个`'\0'`开始拼接两个字符串，此后`ss = 'ABC6789\0,5\0'`；
     - 输出时读取到第一个`'\0'`就会停止。
   ```
   #include  “stdio.h"  
   #include  “string.h"  
   int main()  
   {  
       char ss[10]="1,2,3,4,5";
       gets (ss); 
       strcat (ss,"6789"); 
       printf ("%s\n",ss); 
       return 0;
   }
   ```
